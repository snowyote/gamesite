// Generated by CoffeeScript 1.4.0
var PlayerCtrl, siteApp;

siteApp = angular.module('siteApp', []);

siteApp.factory('Player', function() {
  return {
    name: "New Player",
    mail_hash: '00000000000000000000000000000000'
  };
});

PlayerCtrl = function($scope, Player) {
  $scope.player = Player;
  $scope.avatar = function(hash) {
    return "http://www.gravatar.com/avatar/" + hash + "?d=mm&f=y";
  };
  console.log("loading user");
  return $.get('/api/users/me', function(data) {
    console.log("Got player: " + (JSON.stringify(data)));
    return $scope.$apply(function() {
      return $scope.player = data;
    });
  });
};

$("#playerDataSave").click(function() {
  console.log("Saving player: " + (JSON.stringify($scope.player)));
  return $.put('/api/users/#{$scope.player.user_id}', $scope.player, function() {
    return alert("SUCCESS PATROL");
  });
});
